<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Scoreboard - Full Match</title>
    <style>
        /* GLOBAL STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* HEADER */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        /* SCREENS */
        .screen {
            display: none;
            padding: 40px 30px;
        }

        .screen.active {
            display: block;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .screen h2 {
            color: #1e3c72;
            margin-bottom: 30px;
            font-size: 1.8em;
            text-align: center;
        }

        /* FORM ELEMENTS */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 1.05em;
        }

        .form-group input {
            width: 100%;
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }

        /* BUTTONS */
        .btn {
            padding: 14px 35px;
            border: none;
            border-radius: 10px;
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(30, 60, 114, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: #333;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 193, 7, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(220, 53, 69, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-center {
            display: block;
            margin: 0 auto;
        }

        /* TOSS SECTION */
        .toss-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .toss-btn {
            padding: 50px 40px;
            border: 3px solid #ddd;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            min-width: 150px;
        }

        .toss-btn:hover {
            border-color: #2a5298;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .toss-btn.selected {
            border-color: #2a5298;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .toss-btn h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .toss-result {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
        }

        .toss-result h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .toss-result p {
            font-size: 1.2em;
        }

        .choice-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
        }

        /* SCOREBOARD */
        .scoreboard {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .innings-info {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .score-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .team-score {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 3px solid #e0e0e0;
            transition: all 0.3s;
        }

        .team-score.batting {
            border-color: #28a745;
            box-shadow: 0 5px 20px rgba(40, 167, 69, 0.2);
        }

        .team-name {
            font-size: 1.3em;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .batting-badge {
            background: #28a745;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .score-big {
            font-size: 3em;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 10px;
            line-height: 1;
        }

        .score-details {
            display: flex;
            gap: 20px;
            font-size: 1.05em;
            color: #666;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            font-size: 0.85em;
            color: #999;
            margin-bottom: 3px;
        }

        .detail-value {
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        /* TARGET DISPLAY */
        .target-display {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.3em;
            font-weight: 600;
        }

        /* BALL CONTROLS */
        .ball-controls {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 25px;
        }

        .ball-controls h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .runs-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .run-btn {
            padding: 20px;
            border: 3px solid #ddd;
            border-radius: 10px;
            background: white;
            font-size: 1.5em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            color: #333;
        }

        .run-btn:hover {
            border-color: #2a5298;
            transform: scale(1.05);
        }

        .run-btn.selected {
            border-color: #2a5298;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .wicket-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .wicket-section input[type="checkbox"] {
            width: 25px;
            height: 25px;
            cursor: pointer;
        }

        .wicket-section label {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            cursor: pointer;
        }

        /* BALL HISTORY */
        .ball-history {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }

        .ball-history h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .balls-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 60px;
            align-items: center;
        }

        .ball {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2em;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
            transition: transform 0.2s;
        }

        .ball:hover {
            transform: scale(1.15);
        }

        .ball.runs {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .ball.wicket {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
        }

        .ball.dot {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            color: white;
        }

        .empty-balls {
            color: #999;
            font-style: italic;
        }

        /* RESULT SECTION */
        .result-section {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 50px 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 25px;
        }

        .result-section h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .result-section p {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .match-summary {
            background: rgba(255, 255, 255, 0.2);
            padding: 25px;
            border-radius: 10px;
            margin-top: 25px;
            font-size: 1.2em;
            line-height: 1.8;
        }

        /* ACTION BUTTONS */
        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* PROGRESS BAR */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745 0%, #20c997 100%);
            transition: width 0.3s ease;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .screen { padding: 30px 20px; }
            .screen h2 { font-size: 1.5em; }
            .toss-options { flex-direction: column; }
            .toss-btn { width: 100%; }
            .score-display { grid-template-columns: 1fr; }
            .score-big { font-size: 2.5em; }
            .runs-selector { grid-template-columns: repeat(3, 1fr); }
            .choice-buttons { flex-direction: column; }
            .choice-buttons .btn { width: 100%; }
            .action-buttons { flex-direction: column; }
            .action-buttons .btn { width: 100%; }
            .result-section h2 { font-size: 2em; }
            .result-section p { font-size: 1.2em; }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèè Cricket Scoreboard</h1>
            <p>Complete Match Management System</p>
        </div>

        <!-- SETUP SCREEN -->
        <div class="screen active" id="setupScreen">
            <h2>Match Setup</h2>
            <div class="form-group">
                <label for="team1Name">Team 1 Name</label>
                <input type="text" id="team1Name" placeholder="Enter Team 1 name" required>
            </div>
            <div class="form-group">
                <label for="team2Name">Team 2 Name</label>
                <input type="text" id="team2Name" placeholder="Enter Team 2 name" required>
            </div>
            <div class="form-group">
                <label for="oversPerInnings">Number of Overs Per Innings</label>
                <input type="number" id="oversPerInnings" placeholder="Enter overs (e.g., 5)" min="1" required>
            </div>
            <button class="btn btn-primary btn-center" id="startMatchBtn">Start Match</button>
        </div>

        <!-- TOSS SCREEN -->
        <div class="screen" id="tossScreen">
            <h2>Toss Time</h2>
            
            <div id="tossTeamSelection">
                <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px; color: #333;">
                    Which team will call the toss?
                </p>
                <div class="toss-options">
                    <div class="toss-btn" id="selectTeam1">
                        <h3 id="tossTeam1Name">Team 1</h3>
                    </div>
                    <div class="toss-btn" id="selectTeam2">
                        <h3 id="tossTeam2Name">Team 2</h3>
                    </div>
                </div>
            </div>

            <div id="tossCallSelection" class="hidden">
                <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px; color: #333;">
                    <span id="callingTeamName"></span> calls:
                </p>
                <div class="toss-options">
                    <div class="toss-btn" id="callHeads">
                        <h3>ü™ô Heads</h3>
                    </div>
                    <div class="toss-btn" id="callTails">
                        <h3>ü™ô Tails</h3>
                    </div>
                </div>
            </div>

            <div id="tossResultSection" class="hidden">
                <div class="toss-result">
                    <h3 id="tossOutcome">It's Heads!</h3>
                    <p id="tossWinner">Team 1 won the toss!</p>
                </div>
                
                <p style="text-align: center; font-size: 1.2em; margin: 20px 0; color: #333;">
                    <span id="winningTeamName"></span> chooses to:
                </p>
                <div class="choice-buttons">
                    <button class="btn btn-success" id="chooseBat">üèè Bat First</button>
                    <button class="btn btn-warning" id="chooseBowl">‚öæ Bowl First</button>
                </div>
            </div>
        </div>

        <!-- LIVE MATCH SCREEN -->
        <div class="screen" id="liveMatchScreen">
            <div class="innings-info" id="inningsInfo">First Innings</div>

            <div class="target-display hidden" id="targetDisplay">
                Target: <span id="targetRuns">0</span> runs in <span id="targetBalls">0</span> balls
            </div>

            <div class="scoreboard">
                <div class="score-display">
                    <div class="team-score" id="team1Score">
                        <div class="team-name">
                            <span id="team1DisplayName">Team 1</span>
                            <span class="batting-badge hidden" id="team1Badge">Batting</span>
                        </div>
                        <div class="score-big" id="team1Runs">0/0</div>
                        <div class="score-details">
                            <div class="detail-item">
                                <span class="detail-label">Overs</span>
                                <span class="detail-value" id="team1Overs">0.0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Balls</span>
                                <span class="detail-value" id="team1Balls">0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Remaining</span>
                                <span class="detail-value" id="team1Remaining">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="team-score" id="team2Score">
                        <div class="team-name">
                            <span id="team2DisplayName">Team 2</span>
                            <span class="batting-badge hidden" id="team2Badge">Batting</span>
                        </div>
                        <div class="score-big" id="team2Runs">0/0</div>
                        <div class="score-details">
                            <div class="detail-item">
                                <span class="detail-label">Overs</span>
                                <span class="detail-value" id="team2Overs">0.0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Balls</span>
                                <span class="detail-value" id="team2Balls">0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Remaining</span>
                                <span class="detail-value" id="team2Remaining">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>

            <div class="ball-history">
                <h3>Current Over</h3>
                <div class="balls-container" id="ballsContainer">
                    <span class="empty-balls">No balls bowled yet</span>
                </div>
            </div>

            <div class="ball-controls" id="ballControls">
                <h3>Record Ball</h3>
                
                <div class="runs-selector">
                    <div class="run-btn" data-runs="0">0</div>
                    <div class="run-btn" data-runs="1">1</div>
                    <div class="run-btn" data-runs="2">2</div>
                    <div class="run-btn" data-runs="3">3</div>
                    <div class="run-btn" data-runs="4">4</div>
                    <div class="run-btn" data-runs="6">6</div>
                </div>

                <div class="wicket-section">
                    <input type="checkbox" id="wicketCheck">
                    <label for="wicketCheck">Wicket Fallen</label>
                </div>

                <button class="btn btn-success btn-center" id="recordBallBtn">Record Ball</button>
            </div>

            <div class="action-buttons">
                <button class="btn btn-warning" id="endInningsBtn">End Innings</button>
                <button class="btn btn-danger" id="resetMatchBtn">Reset Match</button>
            </div>
        </div>

        <!-- RESULT SCREEN -->
        <div class="screen" id="resultScreen">
            <div class="result-section">
                <h2>üèÜ Match Result</h2>
                <p id="winnerText">-</p>
                <div class="match-summary" id="matchSummary"></div>
            </div>
            <button class="btn btn-primary btn-center" id="newMatchBtn">Start New Match</button>
        </div>
    </div>

    <script>
        // GAME STATE
        const matchState = {
            team1: { name: '', runs: 0, wickets: 0, balls: 0, ballHistory: [] },
            team2: { name: '', runs: 0, wickets: 0, balls: 0, ballHistory: [] },
            oversPerInnings: 0,
            totalBalls: 0,
            currentInnings: 1,
            battingTeam: '',
            bowlingTeam: '',
            tossCallingTeam: '',
            tossCall: '',
            tossResult: '',
            tossWinner: '',
            selectedRuns: null,
            matchEnded: false
        };

        // DOM ELEMENTS
        const screens = {
            setup: document.getElementById('setupScreen'),
            toss: document.getElementById('tossScreen'),
            liveMatch: document.getElementById('liveMatchScreen'),
            result: document.getElementById('resultScreen')
        };

        // UTILITY FUNCTIONS
        function switchScreen(screenName) {
            Object.values(screens).forEach(screen => screen.classList.remove('active'));
            screens[screenName].classList.add('active');
        }

        function calculateOvers(balls) {
            return `${Math.floor(balls / 6)}.${balls % 6}`;
        }

        function calculateRemainingBalls(currentBalls) {
            return matchState.totalBalls - currentBalls;
        }

        // SETUP SCREEN
        document.getElementById('startMatchBtn').addEventListener('click', function() {
            const team1Name = document.getElementById('team1Name').value.trim();
            const team2Name = document.getElementById('team2Name').value.trim();
            const overs = parseInt(document.getElementById('oversPerInnings').value);

            if (!team1Name) { alert('Please enter Team 1 name'); return; }
            if (!team2Name) { alert('Please enter Team 2 name'); return; }
            if (!overs || overs <= 0) { alert('Please enter valid overs'); return; }

            matchState.team1.name = team1Name;
            matchState.team2.name = team2Name;
            matchState.oversPerInnings = overs;
            matchState.totalBalls = overs * 6;

            document.getElementById('tossTeam1Name').textContent = team1Name;
            document.getElementById('tossTeam2Name').textContent = team2Name;

            switchScreen('toss');
        });

        // TOSS SCREEN
        document.getElementById('selectTeam1').addEventListener('click', function() {
            matchState.tossCallingTeam = 'team1';
            this.classList.add('selected');
            document.getElementById('selectTeam2').classList.remove('selected');
            setTimeout(() => {
                document.getElementById('tossTeamSelection').classList.add('hidden');
                document.getElementById('tossCallSelection').classList.remove('hidden');
                document.getElementById('callingTeamName').textContent = matchState.team1.name;
            }, 300);
        });

        document.getElementById('selectTeam2').addEventListener('click', function() {
            matchState.tossCallingTeam = 'team2';
            this.classList.add('selected');
            document.getElementById('selectTeam1').classList.remove('selected');
            setTimeout(() => {
                document.getElementById('tossTeamSelection').classList.add('hidden');
                document.getElementById('tossCallSelection').classList.remove('hidden');
                document.getElementById('callingTeamName').textContent = matchState.team2.name;
            }, 300);
        });

        document.getElementById('callHeads').addEventListener('click', () => { matchState.tossCall = 'heads'; performToss(); });
        document.getElementById('callTails').addEventListener('click', () => { matchState.tossCall = 'tails'; performToss(); });

        function performToss() {
            matchState.tossResult = Math.random() < 0.5 ? 'heads' : 'tails';
            matchState.tossWinner = matchState.tossCall === matchState.tossResult ? matchState.tossCallingTeam : (matchState.tossCallingTeam === 'team1' ? 'team2' : 'team1');
            displayTossResult();
        }

        function displayTossResult() {
            const winnerName = matchState.tossWinner === 'team1' ? matchState.team1.name : matchState.team2.name;
            document.getElementById('tossOutcome').textContent = `It's ${matchState.tossResult.charAt(0).toUpperCase() + matchState.tossResult.slice(1)}!`;
            document.getElementById('tossWinner').textContent = `${winnerName} won the toss!`;
            document.getElementById('winningTeamName').textContent = winnerName;
            document.getElementById('tossCallSelection').classList.add('hidden');
            document.getElementById('tossResultSection').classList.remove('hidden');
        }

        document.getElementById('chooseBat').addEventListener('click', () => {
            matchState.battingTeam = matchState.tossWinner;
            matchState.bowlingTeam = matchState.tossWinner === 'team1' ? 'team2' : 'team1';
            startMatch();
        });

        document.getElementById('chooseBowl').addEventListener('click', () => {
            matchState.bowlingTeam = matchState.tossWinner;
            matchState.battingTeam = matchState.tossWinner === 'team1' ? 'team2' : 'team1';
            startMatch();
        });

        // LIVE MATCH
        function startMatch() {
            document.getElementById('team1DisplayName').textContent = matchState.team1.name;
            document.getElementById('team2DisplayName').textContent = matchState.team2.name;
            updateScoreboard();
            switchScreen('liveMatch');
        }

        document.querySelectorAll('.run-btn').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.run-btn').forEach(btn => btn.classList.remove('selected'));
                this.classList.add('selected');
                matchState.selectedRuns = parseInt(this.getAttribute('data-runs'));
            });
        });

        document.getElementById('recordBallBtn').addEventListener('click', recordBall);

        function recordBall() {
            if (matchState.selectedRuns === null) { alert('Please select runs'); return; }
            
            const battingTeam = matchState[matchState.battingTeam];
            if (battingTeam.wickets >= 10) { alert('All out! Click "End Innings"'); return; }
            if (battingTeam.balls >= matchState.totalBalls) { alert('Overs completed! Click "End Innings"'); return; }

            const isWicket = document.getElementById('wicketCheck').checked;
            battingTeam.runs += matchState.selectedRuns;
            battingTeam.balls += 1;
            if (isWicket) battingTeam.wickets += 1;
            battingTeam.ballHistory.push({ runs: matchState.selectedRuns, isWicket: isWicket });

            document.querySelectorAll('.run-btn').forEach(btn => btn.classList.remove('selected'));
            matchState.selectedRuns = null;
            document.getElementById('wicketCheck').checked = false;

            updateScoreboard();
            updateBallHistory();
            checkInningsEnd();
            if (matchState.currentInnings === 2) checkMatchEnd();
        }

        function updateScoreboard() {
            document.getElementById('team1Runs').textContent = `${matchState.team1.runs}/${matchState.team1.wickets}`;
            document.getElementById('team1Overs').textContent = calculateOvers(matchState.team1.balls);
            document.getElementById('team1Balls').textContent = matchState.team1.balls;
            document.getElementById('team1Remaining').textContent = matchState.battingTeam === 'team1' ? calculateRemainingBalls(matchState.team1.balls) : '-';

            document.getElementById('team2Runs').textContent = `${matchState.team2.runs}/${matchState.team2.wickets}`;
            document.getElementById('team2Overs').textContent = calculateOvers(matchState.team2.balls);
            document.getElementById('team2Balls').textContent = matchState.team2.balls;
            document.getElementById('team2Remaining').textContent = matchState.battingTeam === 'team2' ? calculateRemainingBalls(matchState.team2.balls) : '-';

            if (matchState.battingTeam === 'team1') {
                document.getElementById('team1Badge').classList.remove('hidden');
                document.getElementById('team2Badge').classList.add('hidden');
                document.getElementById('team1Score').classList.add('batting');
                document.getElementById('team2Score').classList.remove('batting');
            } else {
                document.getElementById('team1Badge').classList.add('hidden');
                document.getElementById('team2Badge').classList.remove('hidden');
                document.getElementById('team1Score').classList.remove('batting');
                document.getElementById('team2Score').classList.add('batting');
            }

            if (matchState.currentInnings === 1) {
                document.getElementById('inningsInfo').textContent = 'First Innings';
                document.getElementById('targetDisplay').classList.add('hidden');
            } else {
                document.getElementById('inningsInfo').textContent = 'Second Innings - Chase';
                const defendingTeam = matchState.battingTeam === 'team1' ? matchState.team2 : matchState.team1;
                document.getElementById('targetRuns').textContent = defendingTeam.runs + 1;
                document.getElementById('targetBalls').textContent = matchState.totalBalls - matchState[matchState.battingTeam].balls;
                document.getElementById('targetDisplay').classList.remove('hidden');
            }

            const progress = (matchState[matchState.battingTeam].balls / matchState.totalBalls) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function updateBallHistory() {
            const currentOver = matchState[matchState.battingTeam].ballHistory.slice(-6);
            const container = document.getElementById('ballsContainer');
            container.innerHTML = '';

            if (currentOver.length === 0) {
                container.innerHTML = '<span class="empty-balls">No balls bowled yet</span>';
                return;
            }

            currentOver.forEach(ball => {
                const ballDiv = document.createElement('div');
                ballDiv.classList.add('ball');
                if (ball.isWicket) {
                    ballDiv.classList.add('wicket');
                    ballDiv.textContent = 'W';
                } else if (ball.runs === 0) {
                    ballDiv.classList.add('dot');
                    ballDiv.textContent = '‚Ä¢';
                } else {
                    ballDiv.classList.add('runs');
                    ballDiv.textContent = ball.runs;
                }
                container.appendChild(ballDiv);
            });
        }

        function checkInningsEnd() {
            const battingTeam = matchState[matchState.battingTeam];
            if (battingTeam.wickets >= 10 || battingTeam.balls >= matchState.totalBalls) {
                document.getElementById('recordBallBtn').disabled = true;
            }
        }

        document.getElementById('endInningsBtn').addEventListener('click', function() {
            if (matchState.currentInnings === 1) {
                matchState.currentInnings = 2;
                matchState.battingTeam = matchState.battingTeam === 'team1' ? 'team2' : 'team1';
                matchState.bowlingTeam = matchState.bowlingTeam === 'team1' ? 'team2' : 'team1';
                document.getElementById('recordBallBtn').disabled = false;
                updateScoreboard();
                updateBallHistory();
                alert(`Second innings! ${matchState[matchState.battingTeam].name} is batting.`);
            } else {
                showMatchResult();
            }
        });

        function checkMatchEnd() {
            const chasing = matchState[matchState.battingTeam];
            const defending = matchState.battingTeam === 'team1' ? matchState.team2 : matchState.team1;
            if (chasing.runs > defending.runs) {
                matchState.matchEnded = true;
                showMatchResult();
            }
        }

        function showMatchResult() {
            matchState.matchEnded = true;
            const team1 = matchState.team1;
            const team2 = matchState.team2;
            let winnerText = '';

            if (team1.runs > team2.runs) {
                winnerText = `${team1.name} won by ${team1.runs - team2.runs} run${team1.runs - team2.runs > 1 ? 's' : ''}!`;
            } else if (team2.runs > team1.runs) {
                winnerText = `${team2.name} won by ${10 - team2.wickets} wicket${10 - team2.wickets > 1 ? 's' : ''}!`;
            } else {
                winnerText = 'Match Tied!';
            }

            document.getElementById('winnerText').textContent = winnerText;
            document.getElementById('matchSummary').innerHTML = `
                <strong>${team1.name}:</strong> ${team1.runs}/${team1.wickets} (${calculateOvers(team1.balls)} overs)<br><br>
                <strong>${team2.name}:</strong> ${team2.runs}/${team2.wickets} (${calculateOvers(team2.balls)} overs)
            `;

            switchScreen('result');
        }

        document.getElementById('resetMatchBtn').addEventListener('click', () => {
            if (confirm('Reset match?')) location.reload();
        });

        document.getElementById('newMatchBtn').addEventListener('click', () => location.reload());
    </script>
</body>

</html>
